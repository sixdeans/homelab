# TinyAuth Environment Configuration
# Generated by Ansible

# Base Configuration
TINYAUTH_APPURL={{ tinyauth_app_url | default('http://localhost:3000') }}
TINYAUTH_RESOURCESDIR=/var/lib/tinyauth/resources
TINYAUTH_DATABASEPATH=/var/lib/tinyauth/tinyauth.db
TINYAUTH_DISABLEANALYTICS=false
TINYAUTH_DISABLERESOURCES=false
TINYAUTH_DISABLEUIWARNINGS=false

# Logging Configuration
TINYAUTH_LOG_LEVEL={{ tinyauth_log_level | default('info') }}
TINYAUTH_LOG_JSON=false
TINYAUTH_LOG_STREAMS_APP_ENABLED=true
TINYAUTH_LOG_STREAMS_APP_LEVEL=info
TINYAUTH_LOG_STREAMS_HTTP_ENABLED=true
TINYAUTH_LOG_STREAMS_HTTP_LEVEL=info
TINYAUTH_LOG_STREAMS_AUDIT_ENABLED=false
TINYAUTH_LOG_STREAMS_AUDIT_LEVEL=info

# Server Configuration
TINYAUTH_SERVER_PORT={{ tinyauth_port | default('3000') }}
TINYAUTH_SERVER_ADDRESS=0.0.0.0
TINYAUTH_SERVER_TRUSTEDPROXIES={{ tinyauth_trusted_proxies | default('') }}

# Authentication Configuration
# Default user: admin with password 'admin' (change this!)
TINYAUTH_AUTH_USERS={{ tinyauth_users | default('admin:$2a$10$N9qo8uLOickgx2ZMRZoMyeIjZAgcfl7p92ldGxad68LJZdL17lhWy') }}
TINYAUTH_AUTH_SECURECOOKIE={{ tinyauth_secure_cookie | default('false') }}
TINYAUTH_AUTH_SESSIONEXPIRY={{ tinyauth_session_expiry | default('7200') }}
TINYAUTH_AUTH_SESSIONMAXLIFETIME=0
TINYAUTH_AUTH_LOGINTIMEOUT=300
TINYAUTH_AUTH_LOGINMAXRETRIES=5

# OAuth Configuration (optional)
{% if tinyauth_oauth_whitelist is defined and tinyauth_oauth_whitelist %}
TINYAUTH_OAUTH_WHITELIST={{ tinyauth_oauth_whitelist }}
{% endif %}
{% if tinyauth_oauth_autoredirect is defined and tinyauth_oauth_autoredirect %}
TINYAUTH_OAUTH_AUTOREDIRECT={{ tinyauth_oauth_autoredirect }}
{% endif %}

# UI Customization
TINYAUTH_UI_TITLE={{ tinyauth_ui_title | default('Tinyauth') }}
TINYAUTH_UI_FORGOTPASSWORDMESSAGE="Contact your administrator to reset your password"
{% if tinyauth_ui_background is defined and tinyauth_ui_background %}
TINYAUTH_UI_BACKGROUNDIMAGE={{ tinyauth_ui_background }}
{% endif %}

# LDAP Configuration (optional)
{% if tinyauth_ldap_enabled | default(false) %}
TINYAUTH_LDAP_ADDRESS="{{ tinyauth_ldap_address }}"
TINYAUTH_LDAP_BINDDN="{{ tinyauth_ldap_binddn }}"
TINYAUTH_LDAP_BINDPASSWORD="{{ tinyauth_ldap_bindpassword }}"
TINYAUTH_LDAP_BASEDN="{{ tinyauth_ldap_basedn }}"
TINYAUTH_LDAP_SEARCHFILTER="{{ tinyauth_ldap_searchfilter }}"
TINYAUTH_LDAP_INSECURE="{{ tinyauth_ldap_insecure | default('false') }}"
{% endif %}
